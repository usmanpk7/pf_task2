<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./index.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <title>SignUp</title>
</head>
<body>
     <div class="main__container" id="signUpContainer">
        <div class="form__container">
            <h2>Sign Up</h2>
            <p class="text">After Signup You will go to the login page</p>
            <form id="signUpForm" class="form2">
                <div class="form__input">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" name="firstName" placeholder="First Name" required>
                </div>
                <div class="form__input">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" name="lastName" placeholder="Last Name" required>
                </div>
                <div class="form__input">
                    <label for="email2">Email</label>
                    <input type="email" id="email2" name="email" placeholder="Email" autocomplete="off" required>
                </div>
                <div class="form__input">
                    <label for="password2">Password</label>
                    <input type="password" id="password2" name="password" placeholder="Password" required>
                </div>
                 <div class="form__input">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address" placeholder="Address" required>
                </div>
                <div class="form__input">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone" placeholder="Phone" required>
                </div>
                <div class="form__input">
                    <label for="image">Image Upload</label>
                    <input type="file" id="image" name="image" accept="image/*" required>
                </div> 

                <div class="form-group">
                    <label for="liveImage">Live Image Capturing</label>
                    <video id="liveImage" autoplay playsinline></video>
                    <button id="captureButton" class="btn btn-primary">
                      Capture Image
                    </button>
                  </div>

                <div class="form__input">
                    <button type="button" id="signUpButton">Sign Up</button>
                    <button type="button" class="mt-4"><a href="index.html" class="go-back">Log In</a></button>
                </div>
            </form>
        </div>
    </div>

</body>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>

  <script>

//Get Data of Form  
document.addEventListener("DOMContentLoaded", function () {
      const liveImage = document.getElementById("liveImage");
      const captureButton = document.getElementById("captureButton");
      const signUpButton = document.getElementById("signUpButton");

      navigator.mediaDevices
        .getUserMedia({ video: true })
        .then(function (stream) {
          liveImage.srcObject = stream;
        })
        .catch(function (error) {
          console.error("Error accessing camera:", error);
        });

      captureButton.addEventListener("click", function () {
        const canvas = document.createElement("canvas");
        const context = canvas.getContext("2d");
        canvas.width = liveImage.videoWidth;
        canvas.height = liveImage.videoHeight;
        context.drawImage(liveImage, 0, 0, canvas.width, canvas.height);
        const capturedImage = canvas.toDataURL("image/jpeg");
      });

      signUpButton.addEventListener("click", function () {
        const firstName = document.getElementById("firstName").value;
        const lastName = document.getElementById("lastName").value;
        const email = document.getElementById("email2").value;
        const password = document.getElementById("password2").value;
        const address = document.getElementById("address").value;
        const phone = document.getElementById("phone").value;
        const image = document.getElementById("image").value;

        const signUpData = {
          firstName: firstName,
          lastName: lastName,
          email: email,
          password: password,
          address: address,
          phone: phone,
          image: image,
          liveImage: liveImage.srcObject, 
        };

        localStorage.setItem("signUpData", JSON.stringify(signUpData));
        document.getElementById("signUpForm").reset();

        window.location.href = 'SignIn.html';
      });
    });
  </script>
</html>